<div class="documents-section">
  <div class="container-fluid">
    <div class="row">
      <div class="col-12">
        <h2 class="section-title">Document Library</h2>
      </div>
    </div>
    
    <!-- Search and Filters -->
    <div class="row mb-4">
      <div class="col-12">
        <p-card class="filter-card">
          <div class="filters-container">
            <div class="search-group">
              <label>Search Documents</label>
              <input type="text" 
                     pInputText 
                     [(ngModel)]="searchTerm"
                     (input)="applyFilters()"
                     placeholder="Search by title, description, or tags..."
                     class="common-input">
            </div>
            
            <div class="filter-group">
              <label>Category</label>
              <p-dropdown [options]="categories" 
                          [(ngModel)]="selectedCategory"
                          (onChange)="applyFilters()"
                          placeholder="Select Category">
              </p-dropdown>
            </div>
            
            <div class="filter-group">
              <label>Type</label>
              <p-dropdown [options]="types" 
                          [(ngModel)]="selectedType"
                          (onChange)="applyFilters()"
                          placeholder="Select Type">
              </p-dropdown>
            </div>
            
            <div class="filter-actions">
              <button pButton 
                      type="button" 
                      label="Reset" 
                      class="p-button-outlined"
                      (click)="selectedCategory='All'; selectedType='All'; searchTerm=''; applyFilters()">
              </button>
            </div>
          </div>
        </p-card>
      </div>
    </div>
    
    <!-- Documents Grid -->
    <div class="row">
      <div class="col-lg-6 col-md-12 mb-3" *ngFor="let document of filteredDocuments">
        <p-card class="document-card">
          <div class="document-header">
            <div class="document-icon" [class]="getTypeClass(document.type)">
              <i [class]="getTypeIcon(document.type)"></i>
            </div>
            <div class="document-info">
              <h4 class="document-title">{{ document.title }}</h4>
              <div class="document-meta">
                <span class="category-tag">{{ document.category }}</span>
                <span class="restriction-badge" *ngIf="document.isRestricted">
                  <i class="pi pi-lock me-1"></i>Restricted
                </span>
              </div>
            </div>
          </div>
          
          <div class="document-description">
            <p>{{ document.description }}</p>
          </div>
          
          <div class="document-tags">
            <span class="tag" *ngFor="let tag of document.tags">{{ tag }}</span>
          </div>
          
          <div class="document-details">
            <div class="row">
              <div class="col-6">
                <div class="detail-item">
                  <i class="pi pi-calendar me-2"></i>
                  <span>{{ document.uploadDate | date:'MMM dd, yyyy' }}</span>
                </div>
              </div>
              <div class="col-6">
                <div class="detail-item">
                  <i class="pi pi-file me-2"></i>
                  <span>{{ document.size }}</span>
                </div>
              </div>
            </div>
            
            <div class="row mt-2">
              <div class="col-6">
                <div class="detail-item">
                  <i class="pi pi-download me-2"></i>
                  <span>{{ document.downloadCount }} downloads</span>
                </div>
              </div>
              <div class="col-6">
                <div class="detail-item">
                  <i class="pi pi-tag me-2"></i>
                  <span>{{ document.type | titlecase }}</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="document-actions">
            <button pButton 
                    type="button" 
                    [label]="document.isRestricted ? 'Request Access' : 'Download'"
                    [class]="document.isRestricted ? 'p-button-outlined' : 'p-button-primary'"
                    (click)="downloadDocument(document)">
              <i [class]="document.isRestricted ? 'pi pi-lock' : 'pi pi-download'" class="me-2"></i>
            </button>
            <button pButton 
                    type="button" 
                    label="Preview" 
                    class="p-button-outlined ms-2">
              <i class="pi pi-eye me-2"></i>
            </button>
          </div>
        </p-card>
      </div>
    </div>
    
    <!-- No Results -->
    <div class="row" *ngIf="filteredDocuments.length === 0">
      <div class="col-12">
        <p-card class="no-results-card">
          <div class="no-results-content">
            <i class="pi pi-search no-results-icon"></i>
            <h3>No documents found</h3>
            <p>Try adjusting your search criteria or filters to find what you're looking for.</p>
            <button pButton 
                    type="button" 
                    label="Clear Filters" 
                    class="p-button-primary"
                    (click)="selectedCategory='All'; selectedType='All'; searchTerm=''; applyFilters()">
            </button>
          </div>
        </p-card>
      </div>
    </div>
    
    <!-- Document Statistics -->
    <div class="row mt-4">
      <div class="col-12">
        <p-card header="Document Statistics" class="stats-card">
          <div class="row">
            <div class="col-lg-3 col-md-6 mb-3">
              <div class="stat-item">
                <h4>Total Documents</h4>
                <div class="stat-value">{{ documents.length }}</div>
              </div>
            </div>
            
            <div class="col-lg-3 col-md-6 mb-3">
              <div class="stat-item">
                <h4>Public Access</h4>
                <div class="stat-value">{{ documents.filter(d => !d.isRestricted).length }}</div>
              </div>
            </div>
            
            <div class="col-lg-3 col-md-6 mb-3">
              <div class="stat-item">
                <h4>Restricted</h4>
                <div class="stat-value">{{ documents.filter(d => d.isRestricted).length }}</div>
              </div>
            </div>
            
            <div class="col-lg-3 col-md-6 mb-3">
              <div class="stat-item">
                <h4>Total Downloads</h4>
                <div class="stat-value">{{ documents.reduce((sum, d) => sum + d.downloadCount, 0) }}</div>
              </div>
            </div>
          </div>
        </p-card>
      </div>
    </div>
  </div>
</div>